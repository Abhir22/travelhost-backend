generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum DESTINATIONTYPE_ENUM {
  INTERNATIONAL
  DOMESTIC
}

model Country {
  id                   String               @id @default(uuid()) @db.Char(36)
  name                 String               @unique
  isoCode              String?              @unique
  states               State[]
  cities               City[]
  packageCities        PackageCity[]
  packagecountries     PackageCountry[]
  destinationCountries DestinationCountry[]
  createdAt            DateTime             @default(now())
  updatedAt            DateTime             @updatedAt

  @@index([name])
}

model State {
  id                String             @id @default(uuid()) @db.Char(36)
  countryId         String
  name              String
  country           Country            @relation(fields: [countryId], references: [id], onDelete: Cascade)
  cities            City[]
  packageCities     PackageCity[]
  packagestates     PackageState[]
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt

  @@index([countryId])
  @@index([name])
}

model City {
  id                String            @id @default(uuid()) @db.Char(36)
  countryId         String
  stateId           String?
  name              String
  country           Country           @relation(fields: [countryId], references: [id], onDelete: Cascade)
  state             State?            @relation(fields: [stateId], references: [id], onDelete: SetNull)
  hotels            Hotel[]
  packageCities     PackageCity[]
  sightings         Sightseeing[]
  destinationCities DestinationCity[]
  createdAt         DateTime          @default(now())
  updatedAt         DateTime          @updatedAt

  @@index([countryId])
  @@index([stateId])
  @@index([name])
}

model Sightseeing {
  id                String             @id @default(uuid()) @db.Char(36)
  cityId            String
  name              String
  city              City               @relation(fields: [cityId], references: [id], onDelete: Cascade)
  hotelSightseeings HotelSightseeing[]
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt

  @@index([cityId])
  @@index([name])
}

model Hotel {
  id                String             @id @default(uuid()) @db.Char(36)
  cityId            String
  hotelTypeId       String?
  name              String
  rating            Int?
  thumbnail         String?
  city              City               @relation(fields: [cityId], references: [id], onDelete: Cascade)
  hotelType         HotelType?         @relation(fields: [hotelTypeId], references: [id], onDelete: SetNull)
  hotelRooms        HotelRoom[]
  hotelSightseeings HotelSightseeing[]
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt

  @@index([cityId])
  @@index([hotelTypeId])
  @@index([name])
}

model HotelSightseeing {
  id            String      @id @default(uuid()) @db.Char(36)
  hotelId       String
  sightseeingId String
  hotel         Hotel       @relation(fields: [hotelId], references: [id], onDelete: Cascade)
  sightseeing   Sightseeing @relation(fields: [sightseeingId], references: [id], onDelete: Cascade)
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt

  @@unique([hotelId, sightseeingId])
  @@index([hotelId])
  @@index([sightseeingId])
}

model HotelType {
  id          String   @id @default(uuid()) @db.Char(36)
  name        String
  description String?
  hotels      Hotel[]
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model MealCategory {
  id                      String                   @id @default(uuid()) @db.Char(36)
  name                    String                   @unique
  packagecitydaymealtypes PackageCityDayMealType[]
  createdAt               DateTime                 @default(now())
  updatedAt               DateTime                 @updatedAt
}

model HotelRoom {
  id          String      @id @default(uuid()) @db.Char(36)
  hotelId     String
  roomType    String      @default("Standard Room")
  roomNumber  String?
  price       Decimal?
  amenities   String?
  description String?
  hotel       Hotel       @relation(fields: [hotelId], references: [id], onDelete: Cascade)
  roomImages  RoomImage[]
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
}

model RoomImage {
  id          String    @id @default(uuid()) @db.Char(36)
  hotelRoomId String
  imageUrl    String
  hotelRoom   HotelRoom @relation(fields: [hotelRoomId], references: [id], onDelete: Cascade)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
}

model TravelType {
  id        String   @id @default(uuid()) @db.Char(36)
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model TransferMode {
  id        String   @id @default(uuid()) @db.Char(36)
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Destination {
  id                      String                   @id @default(uuid()) @db.Char(36)
  destinationType         DESTINATIONTYPE_ENUM
  createdAt               DateTime                 @default(now())
  updatedAt               DateTime                 @updatedAt
  destinationCountries    DestinationCountry[]
  destinationCities       DestinationCity[]
  destinationPackages     DestinationPackage[]
  destinationPackageTypes DestinationPackageType[]

  @@index([destinationType])
}

model DestinationCountry {
  id            String      @id @default(uuid()) @db.Char(36)
  destinationId String
  countryId     String
  destination   Destination @relation(fields: [destinationId], references: [id], onDelete: Cascade)
  country       Country     @relation(fields: [countryId], references: [id], onDelete: Cascade)
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt

  @@index([destinationId])
  @@index([countryId])
}

model DestinationCity {
  id            String      @id @default(uuid()) @db.Char(36)
  destinationId String
  cityId        String
  destination   Destination @relation(fields: [destinationId], references: [id], onDelete: Cascade)
  city          City        @relation(fields: [cityId], references: [id], onDelete: Cascade)
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt

  @@index([destinationId])
  @@index([cityId])
}

model DestinationPackage {
  id            String      @id @default(uuid()) @db.Char(36)
  destinationId String
  packageId     String
  destination   Destination @relation(fields: [destinationId], references: [id], onDelete: Cascade)
  package       Package     @relation(fields: [packageId], references: [id], onDelete: Cascade)
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt

  @@index([destinationId])
  @@index([packageId])
}

model DestinationPackageType {
  id            String      @id @default(uuid()) @db.Char(36)
  destinationId String
  packageType   String
  destination   Destination @relation(fields: [destinationId], references: [id], onDelete: Cascade)
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt

  @@index([destinationId])
  @@index([packageType])
}

model PackageType {
  id                      String                   @id @default(uuid()) @db.Char(36)
  name                    String                   @unique
  image                   String?
  isInternational         Boolean                  @default(false)
  createdAt               DateTime                 @default(now())
  updatedAt               DateTime                 @updatedAt
}

model PackageCountry {
  id            String      @id @default(uuid()) @db.Char(36)
  packageType   String
  countryId     String
  country       Country     @relation(fields: [countryId], references: [id], onDelete: Cascade)
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
}

model PackageState {
  id            String      @id @default(uuid()) @db.Char(36)
  packageType   String
  stateId       String
  state         State       @relation(fields: [stateId], references: [id], onDelete: Cascade)
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
}


model Package {
  id                      String                   @id @default(uuid()) @db.Char(36)
  packageType             String
  packageName             String
  shortDescription        String?                  @db.Text
  longDescription         String?                  @db.Text
  mainImage               String?
  thumbnail               String?
  video                   String?
  basePrice               Decimal?
  duration                String
  packagecategorymappings PackageCategoryMapping[]
  packageactivitymappings PackageActivityMapping[]
  packagesnapshotmappings PackageSnapshotMapping[]
  packagecities           PackageCity[]
  destinationPackages     DestinationPackage[]
  packageTermsConditions  PackageTermsCondition[]
  packageInclusions       PackageInclusion[]
  packageExclusions       PackageExclusion[]
  packagePaymentPolicies  PackagePaymentPolicy[]
  packageCancellationPolicies PackageCancellationPolicy[]
  packagePricings         PackagePricing[]
  packageOptions          PackageOption[]
  packageGalleries        PackageGallery[]
  createdAt               DateTime                 @default(now())
  updatedAt               DateTime                 @updatedAt
}

model PackageCategory {
  id                      String                   @id @default(uuid()) @db.Char(36)
  name                    String                   @unique
  icon                    String?
  packagecategorymappings PackageCategoryMapping[]
  createdAt               DateTime                 @default(now())
  updatedAt               DateTime                 @updatedAt
}

model PackageCategoryMapping {
  id         String          @id @default(uuid()) @db.Char(36)
  packageId  String
  categoryId String
  package    Package         @relation(fields: [packageId], references: [id], onDelete: Cascade)
  category   PackageCategory @relation(fields: [categoryId], references: [id], onDelete: Cascade)
}

model PackageActivity {
  id                      String                   @id @default(uuid()) @db.Char(36)
  name                    String                   @unique
  image                   String?
  packageactivitymappings PackageActivityMapping[]
  createdAt               DateTime                 @default(now())
  updatedAt               DateTime                 @updatedAt
}

model PackageActivityMapping {
  id         String          @id @default(uuid()) @db.Char(36)
  packageId  String
  activityId String
  package    Package         @relation(fields: [packageId], references: [id], onDelete: Cascade)
  activity   PackageActivity @relation(fields: [activityId], references: [id], onDelete: Cascade)
}

model PackageSnapshot {
  id                      String                   @id @default(uuid()) @db.Char(36)
  name                    String                   @unique
  icon                    String?
  packagesnapshotmappings PackageSnapshotMapping[]
  createdAt               DateTime                 @default(now())
  updatedAt               DateTime                 @updatedAt
}

model PackageSnapshotMapping {
  id         String          @id @default(uuid()) @db.Char(36)
  packageId  String
  snapshotId String
  package    Package         @relation(fields: [packageId], references: [id], onDelete: Cascade)
  snapshot   PackageSnapshot @relation(fields: [snapshotId], references: [id], onDelete: Cascade)
}

model PackageCity {
  id               String           @id @default(uuid()) @db.Char(36)
  packageId        String
  countryId        String
  stateId          String?
  cityId           String
  totalDays        Int
  totalNights      Int
  package          Package          @relation(fields: [packageId], references: [id], onDelete: Cascade)
  cityObj          City             @relation(fields: [cityId], references: [id])
  stateObj         State?           @relation(fields: [stateId], references: [id])
  countryObj       Country          @relation(fields: [countryId], references: [id])
  packagecitydaies PackageCityDay[]
  createdAt        DateTime         @default(now())
  updatedAt        DateTime         @updatedAt
}

model PackageCityDay {
  id                         String                      @id @default(uuid()) @db.Char(36)
  packageCityId              String
  dayNumber                  Int
  startTime                  String?
  endTime                    String?
  startFrom                  String?
  endAt                      String?
  start_description          String?
  end_description            String?
  packageCity                PackageCity                 @relation(fields: [packageCityId], references: [id], onDelete: Cascade)
  packagecitydaytravels      PackageCityDayTravel[]
  packagecitydaysightseeings PackageCityDaySightseeing[]
  packagecitydayhotels       PackageCityDayHotel[]
  packagecitydaymeals        PackageCityDayMeal[]
  packagecitydaymealtypes    PackageCityDayMealType[]
  createdAt                  DateTime                    @default(now())
  updatedAt                  DateTime                    @updatedAt
}

model PackageCityDayTravel {
  id               String         @id @default(uuid()) @db.Char(36)
  packageCityDayId String
  type             String
  carpooling       String?
  vehicleType      String?
  timeFrom         String?
  timeTo           String?
  description      String?
  packageCityDay   PackageCityDay @relation(fields: [packageCityDayId], references: [id], onDelete: Cascade)
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
}

model PackageCityDaySightseeing {
  id               String         @id @default(uuid()) @db.Char(36)
  packageCityDayId String
  sightseeingName  String
  ticket           String?
  timeFrom         String?
  timeTo           String?
  packageCityDay   PackageCityDay @relation(fields: [packageCityDayId], references: [id], onDelete: Cascade)
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
}

model PackageCityDayHotel {
  id               String         @id @default(uuid()) @db.Char(36)
  packageCityDayId String
  hotelName        String
  starRating       Int
  hotelType        String?
  checkInTime      String?
  checkOutTime     String?
  roomType         String?
  numberOfRooms    Int?
  packageCityDay   PackageCityDay @relation(fields: [packageCityDayId], references: [id], onDelete: Cascade)
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
}

model PackageCityDayMeal {
  id               String         @id @default(uuid()) @db.Char(36)
  packageCityDayId String
  mealType         String
  provider         String
  time             String?
  description      String?
  packageCityDay   PackageCityDay @relation(fields: [packageCityDayId], references: [id], onDelete: Cascade)
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
}

model PackageCityDayMealType {
  id               String         @id @default(uuid()) @db.Char(36)
  packageCityDayId String
  mealTypeId       String
  mealCategoryId   String?
  provider         String?
  time             String?
  description      String?
  packageCityDay   PackageCityDay @relation(fields: [packageCityDayId], references: [id], onDelete: Cascade)
  mealType         MealType       @relation(fields: [mealTypeId], references: [id], onDelete: Cascade)
  mealCategory     MealCategory?  @relation(fields: [mealCategoryId], references: [id], onDelete: SetNull)
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt

  @@index([mealCategoryId])
}

model MealType {
  id                      String                   @id @default(uuid()) @db.Char(36)
  name                    String                   @unique
  description             String?
  packagecitydaymealtypes PackageCityDayMealType[]
  createdAt               DateTime                 @default(now())
  updatedAt               DateTime                 @updatedAt
}

model VehicleType {
  id              String   @id @default(uuid()) @db.Char(36)
  name            String
  vehicleCategory String
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
}



model PackageTermsCondition {
  id        String   @id @default(uuid()) @db.Char(36)
  packageId String
  content   String   @db.LongText
  linkText  String?  @db.VarChar(255)
  linkUrl   String?  @db.VarChar(500)
  videoUrl  String?  @db.VarChar(500)
  imageUrl  String?  @db.VarChar(500)
  fileName  String?  @db.VarChar(255)
  filePath  String?  @db.VarChar(500)
  fileType  String?  @db.VarChar(50)
  fileSize  BigInt?
  createdBy String?  @db.VarChar(36)
  package   Package  @relation(fields: [packageId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model PackageInclusion {
  id        String   @id @default(uuid()) @db.Char(36)
  packageId String
  content   String   @db.LongText
  createdBy String?  @db.VarChar(36)
  package   Package  @relation(fields: [packageId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model PackageExclusion {
  id        String   @id @default(uuid()) @db.Char(36)
  packageId String
  content   String   @db.LongText
  createdBy String?  @db.VarChar(36)
  package   Package  @relation(fields: [packageId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model PackagePaymentPolicy {
  id        String   @id @default(uuid()) @db.Char(36)
  packageId String
  content   String   @db.LongText
  createdBy String?  @db.VarChar(36)
  package   Package  @relation(fields: [packageId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model PackageCancellationPolicy {
  id        String   @id @default(uuid()) @db.Char(36)
  packageId String
  content   String   @db.LongText
  createdBy String?  @db.VarChar(36)
  package   Package  @relation(fields: [packageId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum SEASON_ENUM {
  ON_SEASON
  OFF_SEASON
  MID_SEASON
  FESTIVE_SEASON
}

model PackagePricing {
  id                         String      @id @default(uuid()) @db.Char(36)
  packageId                  String
  season                     SEASON_ENUM
  dateFrom                   DateTime    @db.Date
  dateTo                     DateTime    @db.Date
  rackRate                   Decimal     @db.Decimal(10, 2)
  publishedRate              Decimal     @db.Decimal(10, 2)
  customerDiscountPercentage Decimal?    @db.Decimal(5, 2)
  customerDiscountAmount     Decimal?    @db.Decimal(10, 2)
  adultRate                  Decimal?    @db.Decimal(10, 2)
  agentDiscountPercentage    Decimal?    @db.Decimal(5, 2)
  agentDiscountAmount        Decimal?    @db.Decimal(10, 2)
  agentRate                  Decimal?    @db.Decimal(10, 2)
  childRate                  Decimal?    @db.Decimal(10, 2)
  infantRate                 Decimal?    @db.Decimal(10, 2)
  createdBy                  String?     @db.VarChar(36)
  package                    Package     @relation(fields: [packageId], references: [id], onDelete: Cascade)
  createdAt                  DateTime    @default(now())
  updatedAt                  DateTime    @updatedAt
}

model PackageOption {
  id                         String   @id @default(uuid()) @db.Char(36)
  packageId                  String
  includeGroupDeparture      Boolean  @default(false)
  includeFixedDeparture      Boolean  @default(false)
  includePackageAvailability Boolean  @default(false)
  package                    Package  @relation(fields: [packageId], references: [id], onDelete: Cascade)
  createdAt                  DateTime @default(now())
  updatedAt                  DateTime @updatedAt
}

model PackageGallery {
  id         String   @id @default(uuid()) @db.Char(36)
  packageId  String
  imageUrl   String   @db.VarChar(500)
  imageOrder Int
  isCover    Boolean  @default(false)
  package    Package  @relation(fields: [packageId], references: [id], onDelete: Cascade)
  createdAt  DateTime @default(now())
}
