generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum DESTINATIONTYPE_ENUM {
  INTERNATIONAL
  DOMESTIC
}

model Country {
  id        String  @id @default(uuid())
  name      String  @unique
  isoCode   String? @unique
  states    State[]
  cities    City[]
  hotels    Hotel[]
  travelTypes TravelType[]
  travelModes TravelMode[]
  destinations Destination[]
  packageCities PackageCity[]
  packagecountries PackageCountry[]
  sightings Sightseeing[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model State {
  id        String @id @default(uuid())
  countryId String
  name      String
  country   Country @relation(fields: [countryId], references: [id], onDelete: Cascade)
  cities    City[]
  hotels    Hotel[]
  travelTypes TravelType[]
  travelModes TravelMode[]
  destinations Destination[]
  packageCities PackageCity[]
  packagestates PackageState[]
  sightings Sightseeing[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model City {
  id        String @id @default(uuid())
  countryId String
  stateId   String?
  name      String
  country Country @relation(fields: [countryId], references: [id], onDelete: Cascade)
  state   State?  @relation(fields: [stateId], references: [id], onDelete: SetNull)
  hotels    Hotel[]
  travelTypes TravelType[]
  travelModes TravelMode[]
  destinations Destination[]
  packageCities PackageCity[]
  sightings Sightseeing[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Sightseeing {
  id        String @id @default(uuid())
  countryId String?
  stateId   String?
  cityId    String?
  name      String
  country Country? @relation(fields: [countryId], references: [id], onDelete: SetNull)
  state   State?   @relation(fields: [stateId], references: [id], onDelete: SetNull)
  city    City?    @relation(fields: [cityId], references: [id], onDelete: SetNull)
  travelTypes TravelType[]
  travelModes TravelMode[]
  hotels Hotel[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Hotel {
  id        String @id @default(uuid())
  countryId String
  stateId   String
  cityId    String
  sightseeingId String?
  hotelTypeId String?
  name      String
  rating    Int?

  thumbnail String?
  country Country @relation(fields: [countryId], references: [id], onDelete: Cascade)
  state   State   @relation(fields: [stateId], references: [id], onDelete: Cascade)
  city    City    @relation(fields: [cityId], references: [id], onDelete: Cascade)
  sightseeing Sightseeing? @relation(fields: [sightseeingId], references: [id], onDelete: SetNull)
  hotelType HotelType? @relation(fields: [hotelTypeId], references: [id], onDelete: SetNull)
  hotelRooms HotelRoom[]
  travelTypes TravelType[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model HotelType {
  id          String @id @default(uuid())
  name        String
  description String?
  hotels      Hotel[]
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model RoomType {
  id          String @id @default(uuid())
  name        String
  description String?
  hotelRooms  HotelRoom[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model HotelRoom {
  id         String @id @default(uuid())
  hotelId    String
  roomTypeId String
  roomNumber String?
  price      Decimal?
  amenities  String?
  description String?
  hotel    Hotel    @relation(fields: [hotelId], references: [id], onDelete: Cascade)
  roomType RoomType @relation(fields: [roomTypeId], references: [id], onDelete: Cascade)
  roomImages RoomImage[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model RoomImage {
  id          String @id @default(uuid())
  hotelRoomId String
  imageUrl    String
  hotelRoom HotelRoom @relation(fields: [hotelRoomId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model TravelType {
  id             String @id @default(uuid())
  countryId      String
  stateId        String
  cityId         String
  sightseeingId  String?
  name           String
  hotelId        String?
  country     Country @relation(fields: [countryId], references: [id], onDelete: Cascade)
  state       State   @relation(fields: [stateId], references: [id], onDelete: Cascade)
  city        City    @relation(fields: [cityId], references: [id], onDelete: Cascade)
  sightseeing Sightseeing? @relation(fields: [sightseeingId], references: [id], onDelete: SetNull)
  hotel       Hotel?   @relation(fields: [hotelId], references: [id], onDelete: SetNull)
  travelModes TravelMode[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model TravelMode {
  id             String @id @default(uuid())
  countryId      String
  stateId        String
  cityId         String
  sightseeingId  String?
  travelTypeId   String?
  name           String
  country     Country @relation(fields: [countryId], references: [id], onDelete: Cascade)
  state       State   @relation(fields: [stateId], references: [id], onDelete: Cascade)
  city        City    @relation(fields: [cityId], references: [id], onDelete: Cascade)
  sightseeing Sightseeing? @relation(fields: [sightseeingId], references: [id], onDelete: SetNull)
  travelType  TravelType? @relation(fields: [travelTypeId], references: [id], onDelete: SetNull)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Destination {
  id        String @id @default(uuid())
  destinationType DESTINATIONTYPE_ENUM
  name      String
  countryId String?
  stateId   String?
  cityId    String?
  country Country? @relation(fields: [countryId], references: [id], onDelete: SetNull)
  state   State?   @relation(fields: [stateId], references: [id], onDelete: SetNull)
  city    City?    @relation(fields: [cityId], references: [id], onDelete: SetNull)
  priceRange     String?
  thumbnailPhoto String?
  bannerPhoto    String?
  video          String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model PackageType {
  id        String @id @default(uuid())
  name      String @unique
  image     String?
  isInternational Boolean @default(false)
  packages Package[]
  packagecountries PackageCountry[]
  packagestates PackageState[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model PackageCountry {
  id        String @id @default(uuid())
  packageTypeId String
  countryId String
  packageType PackageType @relation(fields: [packageTypeId], references: [id], onDelete: Cascade)
  country Country @relation(fields: [countryId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([packageTypeId, countryId])
}

model PackageState {
  id        String @id @default(uuid())
  packageTypeId String
  stateId String
  packageType PackageType @relation(fields: [packageTypeId], references: [id], onDelete: Cascade)
  state State @relation(fields: [stateId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([packageTypeId, stateId])
}

model Package {
  id        String @id @default(uuid())
  packageTypeId String
  packageName String
  shortDescription String? @db.Text
  longDescription String? @db.Text
  description String?
  mainImage String?
  thumbnail String?
  video     String?
  basePrice Decimal?
  days      Int
  nights    Int
  packageType PackageType @relation(fields: [packageTypeId], references: [id], onDelete: Cascade)
  packagecategorymappings PackageCategoryMapping[]
  packageactivitymappings PackageActivityMapping[]
  packagesnapshotmappings PackageSnapshotMapping[]
  packagecities PackageCity[]
  packagemealtypes PackageMealType[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model PackageCategory {
  id        String @id @default(uuid())
  name      String @unique
  icon      String?
  packagecategorymappings PackageCategoryMapping[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model PackageCategoryMapping {
  id        String @id @default(uuid())
  packageId String
  categoryId String
  package Package @relation(fields: [packageId], references: [id], onDelete: Cascade)
  category PackageCategory @relation(fields: [categoryId], references: [id], onDelete: Cascade)
}

model PackageActivity {
  id        String @id @default(uuid())
  name      String @unique
  image     String?
  packageactivitymappings PackageActivityMapping[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model PackageActivityMapping {
  id        String @id @default(uuid())
  packageId String
  activityId String
  package Package @relation(fields: [packageId], references: [id], onDelete: Cascade)
  activity PackageActivity @relation(fields: [activityId], references: [id], onDelete: Cascade)
}

model PackageSnapshot {
  id        String @id @default(uuid())
  name      String @unique
  icon      String?
  packagesnapshotmappings PackageSnapshotMapping[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model PackageSnapshotMapping {
  id        String @id @default(uuid())
  packageId String
  snapshotId String
  package Package @relation(fields: [packageId], references: [id], onDelete: Cascade)
  snapshot PackageSnapshot @relation(fields: [snapshotId], references: [id], onDelete: Cascade)
}

model PackageCity {
  id        String @id @default(uuid())
  packageId String
  countryId String
  stateId   String?
  cityId    String
  totalDays Int
  totalNights Int
  package Package @relation(fields: [packageId], references: [id], onDelete: Cascade)
  cityObj City @relation(fields: [cityId], references: [id])
  stateObj State? @relation(fields: [stateId], references: [id])
  countryObj Country @relation(fields: [countryId], references: [id])
  packagecitydaies PackageCityDay[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model PackageCityDay {
  id        String @id @default(uuid())
  packageCityId String
  dayNumber Int
  startTime String?
  endTime   String?
  startFrom String?
  endAt     String?
  description String?
  packageCity PackageCity @relation(fields: [packageCityId], references: [id], onDelete: Cascade)
  packagecitydaytravels PackageCityDayTravel[]
  packagecitydaysightseeings PackageCityDaySightseeing[]
  packagecitydayhotels PackageCityDayHotel[]
  packagecitydaymeals PackageCityDayMeal[]
  packagecitydaymealtypes PackageCityDayMealType[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model PackageCityDayTravel {
  id        String @id @default(uuid())
  packageCityDayId String
  type      String
  carpooling String?
  vehicleType String?
  timeFrom  String?
  timeTo    String?
  description String?
  packageCityDay PackageCityDay @relation(fields: [packageCityDayId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model PackageCityDaySightseeing {
  id        String @id @default(uuid())
  packageCityDayId String
  sightseeingName String
  ticket    String?
  timeFrom  String?
  timeTo    String?
  packageCityDay PackageCityDay @relation(fields: [packageCityDayId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model PackageCityDayHotel {
  id        String @id @default(uuid())
  packageCityDayId String
  hotelName String
  starRating Int
  hotelType String?
  checkInTime String?
  checkOutTime String?
  roomType  String?
  numberOfRooms Int?
  packageCityDay PackageCityDay @relation(fields: [packageCityDayId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model PackageCityDayMeal {
  id        String @id @default(uuid())
  packageCityDayId String
  mealType  String
  provider  String
  time      String?
  description String?
  packageCityDay PackageCityDay @relation(fields: [packageCityDayId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model PackageCityDayMealType {
  id        String @id @default(uuid())
  packageCityDayId String
  mealTypeId String
  provider  String?
  time      String?
  description String?
  packageCityDay PackageCityDay @relation(fields: [packageCityDayId], references: [id], onDelete: Cascade)
  mealType MealType @relation(fields: [mealTypeId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model MealType {
  id          String @id @default(uuid())
  name        String @unique
  description String?
  packagemealtypes PackageMealType[]
  packagecitydaymealtypes PackageCityDayMealType[]
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model PackageMealType {
  id        String @id @default(uuid())
  packageId String
  mealTypeId String
  package Package @relation(fields: [packageId], references: [id], onDelete: Cascade)
  mealType MealType @relation(fields: [mealTypeId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([packageId, mealTypeId])
}
